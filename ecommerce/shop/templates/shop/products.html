{% extends 'shop/base.html' %} {% block content %}
<div class="container py-5">
  <!-- Page Header -->
  <div class="row mb-5">
    <div class="col-12">
      <h1 class="display-5 fw-bold">All Products</h1>
      <p class="lead text-muted">
        Browse our complete collection of tech and lifestyle products
      </p>

      <!-- Category Filter -->
      <div class="d-flex flex-wrap gap-2 mb-4">
        <a href="#" class="btn btn-outline-primary active">All</a>
        <a href="#" class="btn btn-outline-primary">Electronics</a>
        <a href="#" class="btn btn-outline-primary">Audio</a>
        <a href="#" class="btn btn-outline-primary">Wearables</a>
        <a href="#" class="btn btn-outline-primary">Accessories</a>
      </div>
    </div>
  </div>

  <!-- Product Grid -->
  <div class="row">
    {% for product in products %}
    <div class="col-md-4 col-lg-3 mb-4">
      <div class="card h-100">
        <div class="position-relative">
          <img
            src="{{ product.image_url|default:'https://images.unsplash.com/photo-1505740420928-5e560c06d30e?w=500&h=300&fit=crop' }}"
            class="card-img-top"
            alt="{{ product.name }}"
            style="height: 220px; object-fit: cover;"
          />
          {% if forloop.first %}
          <span class="position-absolute top-0 start-0 m-3 badge bg-danger"
            >Bestseller</span
          >
          {% endif %}
        </div>
        <div class="card-body d-flex flex-column">
          <span class="category-badge mb-2">Electronics</span>
          <h5 class="card-title">{{ product.name }}</h5>
          <p class="card-text text-muted flex-grow-1">
            {{ product.description }}
          </p>
          <div class="mt-auto">
            <div class="d-flex justify-content-between align-items-center mb-3">
              <span class="price-tag">Â£{{ product.price }}</span>
              <div class="rating text-warning">
                <i class="fas fa-star"></i>
                <i class="fas fa-star"></i>
                <i class="fas fa-star"></i>
                <i class="fas fa-star"></i>
                <i class="far fa-star"></i>
              </div>
            </div>
            <div class="d-flex gap-2">
              <form method="POST" action="{% url 'add_to_cart' product.id %}" class="flex-grow-1" id="add-to-cart-form-{{ product.id }}">
                {% csrf_token %}
                <input type="hidden" name="quantity" value="1">
                <button
                  type="submit"
                  class="btn btn-primary w-100 add-to-cart-btn"
                  data-product-id="{{ product.id }}"
                >
                  <i class="fas fa-cart-plus me-2"></i>Add to Cart
                </button>
              </form>
              <a
                href="{% url 'product_detail' product.id %}"
                class="btn btn-outline-primary"
                title="View Details"
              >
                <i class="fas fa-eye"></i>
              </a>
            </div>
          </div>
        </div>
      </div>
    </div>
    {% empty %}
    <div class="col-12">
      <div class="text-center py-5">
        <i class="fas fa-box-open fa-4x text-muted mb-4"></i>
        <h3>No Products Available</h3>
        <p class="text-muted">Products will be added soon!</p>
        <a href="/admin/" class="btn btn-primary">
          <i class="fas fa-plus me-2"></i>Add Products
        </a>
      </div>
    </div>
    {% endfor %}
  </div>
</div>
{% endblock %}
