{% extends 'shop/base.html' %} {% block content %}
<!-- Hero Section -->
<section class="hero-section">
  <div class="container">
    <div class="row align-items-center">
      <div class="col-md-6">
        <h1 class="hero-title">Welcome to NexusMart</h1>
        <p class="hero-subtitle">
          Discover the latest in technology and lifestyle products. Fast
          delivery, secure checkout, and exceptional customer service.
        </p>
        <a href="/products/" class="btn btn-light btn-lg">
          <i class="fas fa-shopping-bag me-2"></i>
          Shop Now
        </a>
      </div>
      <div class="col-md-6 text-center">
        <i
          class="fas fa-laptop-code"
          style="font-size: 12rem; opacity: 0.8"
        ></i>
      </div>
    </div>
  </div>
</section>

<!-- Featured Products -->
<div class="container">
  <div class="row mb-5">
    <div class="col-12">
      <h2 class="text-center mb-4">Featured Products</h2>
      <p class="text-center text-muted mb-5">
        Curated selection of our best-selling items
      </p>
    </div>
  </div>

  <div class="row">
    {% for product in products %}
    <div class="col-md-4 col-lg-3 mb-4">
      <div class="card h-100">
        <img
          src="{{ product.image_url|default:'https://images.unsplash.com/photo-1505740420928-5e560c06d30e?w=500&h=300&fit=crop' }}"
          class="card-img-top"
          alt="{{ product.name }}"
          style="height: 220px; object-fit: cover;"
        />
        <div class="card-body d-flex flex-column">
          <span class="category-badge mb-2">Electronics</span>
          <h5 class="card-title mt-2">{{ product.name }}</h5>
          <p class="card-text text-muted flex-grow-1">
            {{ product.description|truncatechars:80 }}
          </p>
          <div class="mt-auto">
            <div class="d-flex justify-content-between align-items-center mb-3">
              <span class="price-tag">Â£{{ product.price }}</span>
            </div>
            <form method="POST" action="{% url 'add_to_cart' product.id %}" class="d-inline w-100" id="add-to-cart-form-{{ product.id }}">
              {% csrf_token %}
              <input type="hidden" name="quantity" value="1">
              <button
                type="submit"
                class="btn btn-primary w-100 add-to-cart-btn"
                data-product="{{ product.name }}"
                data-product-id="{{ product.id }}"
              >
                <i class="fas fa-cart-plus me-2"></i> Add to Cart
              </button>
            </form>
            <a
              href="{% url 'product_detail' product.id %}"
              class="btn btn-outline-primary w-100 mt-2"
            >
              <i class="fas fa-eye me-2"></i> View Details
            </a>
          </div>
        </div>
      </div>
    </div>
    {% empty %}
    <div class="col-12">
      <div class="text-center py-5">
        <i class="fas fa-box-open fa-4x text-muted mb-4"></i>
        <h3>No Products Available</h3>
        <p class="text-muted mb-4">Create some products to get started!</p>
        <div class="d-flex gap-2 justify-content-center">
          <a href="/admin/" class="btn btn-primary">
            <i class="fas fa-plus me-2"></i>Add Products via Admin
          </a>
          <form method="POST" action="/admin/shop/product/add/" class="d-inline">
            {% csrf_token %}
            <button type="submit" class="btn btn-outline-primary">
              <i class="fas fa-terminal me-2"></i>Or Run: python manage.py create_dummy_products
            </button>
          </form>
        </div>
        <div class="mt-4">
          <p class="text-muted small">
            <strong>Quick Setup:</strong> Run this command in your terminal:<br>
            <code class="bg-light p-2 rounded">python manage.py create_dummy_products</code>
          </p>
        </div>
      </div>
    </div>
    {% endfor %}
  </div>

  <!-- Call to Action -->
  <div class="row mt-5">
    <div class="col-12 text-center">
      <div class="p-5 rounded" style="background-color: var(--light-bg)">
        <h3>Ready to Transform Your Shopping Experience?</h3>
        <p class="text-muted mb-4">
          Join thousands of satisfied customers shopping at NexusMart
        </p>
        <a href="/products/" class="btn btn-primary btn-lg">
          <i class="fas fa-arrow-right me-2"></i>
          View All Products
        </a>
      </div>
    </div>
  </div>
</div>
{% endblock %}
